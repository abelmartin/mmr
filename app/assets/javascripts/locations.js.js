// Generated by CoffeeScript 1.3.3
(function() {
  var app;

  app = angular.module("MMRApp", ['ngResource']);

  /*
  Always use the CSRF token with requests
  */


  app.config([
    '$httpProvider', function(provider) {
      return provider.defaults.header.common['X-CSRF-Token'] = $('meta[name=csrf-token]').attr('content');
    }
  ]);

  this.LocationCtrl = function($scope, $resource) {
    var Location;
    Location = $resource('/locations/:id', {
      id: '@id'
    }, {
      update: {
        method: 'PUT'
      }
    });
    $scope.locations = Location.query();
    $scope.addLocation = function() {
      var location;
      location = Location.save($scope.newLocation);
      $scope.newestLocation = location;
      $scope.locations.push(location);
      return $scope.newLocation = {};
    };
    $scope.deleteLocation = function() {
      var loc_index;
      loc_index = $scope.locations.indexOf(this.location);
      $scope.locations.splice(loc_index, 1);
      return this.location.$remove();
    };
    $scope.editLocation = function() {
      $scope.tempLocation = {};
      $scope.tempLocation.address = this.location.address;
      return $scope.activeEdit = this.location;
    };
    $scope.cancelEdit = function($event) {
      $event.preventDefault();
      return $scope.activeEdit = null;
    };
    return $scope.updateLocation = function() {
      this.location.address = $scope.tempLocation.address;
      this.location.$update();
      return $scope.activeEdit = null;
    };
  };

}).call(this);
